<!DOCTYPE html>
<html>
<head>
	<title>php code metrics</title>
	<script type="text/javascript"><*jq.js*></script>
</head>
<body>
	<div id="avgmethodplot">
		<p>Changes / Average method complexity</p>
	</div>
	<div id="maxmethodplot">
		<p>Changes / Max method complexity</p>
	</div>

	<script type="text/javascript">
	(function($) {
		var createPlotHolder = function(container) {
			var plot = $('<div style="width:1000px;height:300px;border:1px 1px 1px 1px;"></div>');
			plot.appendTo($(container));
			return plot;
		};
		var prevPoint = {};
		var createPlot = function(plotHolder, data, labels) {
			var id = plotHolder.parent().attr('id');
			var data = [{ data: data, points: { show: true } }];
			var options = {
				xaxis: { min: 0 },
				yaxis: { min: 0 },
				grid: { hoverable: true, clickable: true }
			};

			$.plot(plotHolder, data, options);

			prevPoint[id] = null;
			plotHolder.bind("plotclick", function(event, pos, item) {
				if (item)
				if (prevPoint[id] != item.datapoint) {
					prevPoint[id] = item.datapoint;
					alert(labels[item.dataIndex]);
				} else {
					prevPoint[id] = null;
				}
			});
		};
		var drawer = function(data) {
			var inputAvg = [];
			var inputMax = [];
			var inputLabels = [];
			for (className in data) {
				inputAvg.push([data[className][0], data[className][1]]);
				inputMax.push([data[className][0], data[className][2]]);
				inputLabels.push(className);
			}

			createPlot(createPlotHolder('#avgmethodplot'), inputAvg, inputLabels);
			createPlot(createPlotHolder('#maxmethodplot'), inputMax, inputLabels);
		};

		$(function() {
			drawer(<*json*>);
		});
	})(jQuery);
	</script>
</body>
</html>