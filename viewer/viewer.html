<!DOCTYPE html>
<html>
  <head>
    <title>php code metrics</title>
		<script src="jquery.min.js" type="text/javascript"></script>
    <script src="jquery.flot.js" type="text/javascript"></script>
  </head>
  <body>
		<textarea id="source" style="width:800px;height:30px;"></textarea>
		<button id="draw">Draw</button>

    <div id="turbulenceplot" style="width:600px;height:300px;border:1px 1px 1px 1px;"></div>

    <script type="text/javascript">
      (function($) {
				var drawer = function(data) {
					var inputData = [];
					var inputLabels = [];
					for (className in data) {
						inputData.push(data[className]);
						inputLabels.push(className);
					}
					var turbulencePlot = $("#turbulenceplot");
					var data = [{ data: inputData, points: { show: true } }];
					var options = {
//						xaxis: { min: 0, max: 50 },
//						yaxis: { min: 0, max: 5 },
						grid: { hoverable: true, clickable: true }
					};

					$.plot(turbulencePlot, data, options);

					var prevPoint = null;
					var handler = function(event, pos, item) {
						if (item)
						if (prevPoint != item.datapoint) {
							prevPoint = item.datapoint;
							alert(inputLabels[item.dataIndex]);
						} else {
							prevPoint = null;
						}
					};
//					turbulencePlot.bind("plothover", handler);
					turbulencePlot.bind("plotclick", handler);
				};

				$(function() {
					$('#draw').click(function() {
						var data = $.parseJSON($('#source').val());
						drawer(data);
					});
				});
      })(jQuery);
    </script>
  </body>
</html>